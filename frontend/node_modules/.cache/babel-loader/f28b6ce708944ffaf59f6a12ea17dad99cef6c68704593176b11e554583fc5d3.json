{"ast":null,"code":"import{useState,useEffect}from'react';import{useAuth}from'../contexts/AuthContext';import{apiClient}from'../services/api';// Custom hook to initialize API client with auth token\nexport const useApi=()=>{const{getIdToken}=useAuth();useEffect(()=>{apiClient.setTokenGetter(getIdToken);},[getIdToken]);return apiClient;};// Generic hook for API calls with loading and error states\nexport const useApiCall=function(apiCall){let dependencies=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];const[data,setData]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const execute=async()=>{try{setLoading(true);setError(null);const result=await apiCall();setData(result);return result;}catch(err){var _err$response,_err$response$data;const errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message||'An error occurred';setError(errorMessage);throw err;}finally{setLoading(false);}};useEffect(()=>{if(dependencies.length>0){execute();}},dependencies);return{data,loading,error,execute};};","map":{"version":3,"names":["useState","useEffect","useAuth","apiClient","useApi","getIdToken","setTokenGetter","useApiCall","apiCall","dependencies","arguments","length","undefined","data","setData","loading","setLoading","error","setError","execute","result","err","_err$response","_err$response$data","errorMessage","response","message"],"sources":["D:/pooja/projects/gen ai/frontend/src/hooks/useApi.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { apiClient } from '../services/api';\r\n\r\n// Custom hook to initialize API client with auth token\r\nexport const useApi = () => {\r\n  const { getIdToken } = useAuth();\r\n\r\n  useEffect(() => {\r\n    apiClient.setTokenGetter(getIdToken);\r\n  }, [getIdToken]);\r\n\r\n  return apiClient;\r\n};\r\n\r\n// Generic hook for API calls with loading and error states\r\nexport const useApiCall = <T>(\r\n  apiCall: () => Promise<T>,\r\n  dependencies: any[] = []\r\n) => {\r\n  const [data, setData] = useState<T | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const execute = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const result = await apiCall();\r\n      setData(result);\r\n      return result;\r\n    } catch (err: any) {\r\n      const errorMessage = err.response?.data?.error || err.message || 'An error occurred';\r\n      setError(errorMessage);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (dependencies.length > 0) {\r\n      execute();\r\n    }\r\n  }, dependencies);\r\n\r\n  return { data, loading, error, execute };\r\n};\r\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,OAAO,KAAQ,yBAAyB,CACjD,OAASC,SAAS,KAAQ,iBAAiB,CAE3C;AACA,MAAO,MAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAEC,UAAW,CAAC,CAAGH,OAAO,CAAC,CAAC,CAEhCD,SAAS,CAAC,IAAM,CACdE,SAAS,CAACG,cAAc,CAACD,UAAU,CAAC,CACtC,CAAC,CAAE,CAACA,UAAU,CAAC,CAAC,CAEhB,MAAO,CAAAF,SAAS,CAClB,CAAC,CAED;AACA,MAAO,MAAM,CAAAI,UAAU,CAAG,QAAAA,CACxBC,OAAyB,CAEtB,IADH,CAAAC,YAAmB,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,EAAE,CAExB,KAAM,CAACG,IAAI,CAAEC,OAAO,CAAC,CAAGd,QAAQ,CAAW,IAAI,CAAC,CAChD,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACiB,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAgB,IAAI,CAAC,CAEvD,KAAM,CAAAmB,OAAO,CAAG,KAAAA,CAAA,GAAY,CAC1B,GAAI,CACFH,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CACd,KAAM,CAAAE,MAAM,CAAG,KAAM,CAAAZ,OAAO,CAAC,CAAC,CAC9BM,OAAO,CAACM,MAAM,CAAC,CACf,MAAO,CAAAA,MAAM,CACf,CAAE,MAAOC,GAAQ,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACjB,KAAM,CAAAC,YAAY,CAAG,EAAAF,aAAA,CAAAD,GAAG,CAACI,QAAQ,UAAAH,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcT,IAAI,UAAAU,kBAAA,iBAAlBA,kBAAA,CAAoBN,KAAK,GAAII,GAAG,CAACK,OAAO,EAAI,mBAAmB,CACpFR,QAAQ,CAACM,YAAY,CAAC,CACtB,KAAM,CAAAH,GAAG,CACX,CAAC,OAAS,CACRL,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDf,SAAS,CAAC,IAAM,CACd,GAAIQ,YAAY,CAACE,MAAM,CAAG,CAAC,CAAE,CAC3BQ,OAAO,CAAC,CAAC,CACX,CACF,CAAC,CAAEV,YAAY,CAAC,CAEhB,MAAO,CAAEI,IAAI,CAAEE,OAAO,CAAEE,KAAK,CAAEE,OAAQ,CAAC,CAC1C,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}